<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DTK常用和测试代码片 | Documentation</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Deepin Documentation">
    <link rel="preload" href="/assets/css/0.styles.bc4b65ce.css" as="style"><link rel="preload" href="/assets/js/app.68231c63.js" as="script"><link rel="preload" href="/assets/js/2.ed4cc2e0.js" as="script"><link rel="preload" href="/assets/js/57.16a4cc70.js" as="script"><link rel="prefetch" href="/assets/js/10.2bd85e5c.js"><link rel="prefetch" href="/assets/js/11.0af4eec8.js"><link rel="prefetch" href="/assets/js/12.f7d8be6b.js"><link rel="prefetch" href="/assets/js/13.3e81b361.js"><link rel="prefetch" href="/assets/js/14.3f6a4495.js"><link rel="prefetch" href="/assets/js/15.8abbe16c.js"><link rel="prefetch" href="/assets/js/16.5067aa23.js"><link rel="prefetch" href="/assets/js/17.efeeb296.js"><link rel="prefetch" href="/assets/js/18.fc35c73b.js"><link rel="prefetch" href="/assets/js/19.286ac6af.js"><link rel="prefetch" href="/assets/js/20.dbbd6858.js"><link rel="prefetch" href="/assets/js/21.3e348f42.js"><link rel="prefetch" href="/assets/js/22.e78ebd8a.js"><link rel="prefetch" href="/assets/js/23.0a8271cb.js"><link rel="prefetch" href="/assets/js/24.79750299.js"><link rel="prefetch" href="/assets/js/25.9e0c9c1a.js"><link rel="prefetch" href="/assets/js/26.02e95a8d.js"><link rel="prefetch" href="/assets/js/27.da4a30bf.js"><link rel="prefetch" href="/assets/js/28.7984ec8e.js"><link rel="prefetch" href="/assets/js/29.7bff8d99.js"><link rel="prefetch" href="/assets/js/3.fc576a5e.js"><link rel="prefetch" href="/assets/js/30.8f81354f.js"><link rel="prefetch" href="/assets/js/31.45977fbc.js"><link rel="prefetch" href="/assets/js/32.e9979d0f.js"><link rel="prefetch" href="/assets/js/33.57fbc3c2.js"><link rel="prefetch" href="/assets/js/34.efded599.js"><link rel="prefetch" href="/assets/js/35.fda1478a.js"><link rel="prefetch" href="/assets/js/36.e135385a.js"><link rel="prefetch" href="/assets/js/37.1ba6d1c3.js"><link rel="prefetch" href="/assets/js/38.3a309d36.js"><link rel="prefetch" href="/assets/js/39.da4cd589.js"><link rel="prefetch" href="/assets/js/4.325b2889.js"><link rel="prefetch" href="/assets/js/40.5a06bce9.js"><link rel="prefetch" href="/assets/js/41.d38e1eb2.js"><link rel="prefetch" href="/assets/js/42.04aada46.js"><link rel="prefetch" href="/assets/js/43.09440282.js"><link rel="prefetch" href="/assets/js/44.9c0a4379.js"><link rel="prefetch" href="/assets/js/45.389a08da.js"><link rel="prefetch" href="/assets/js/46.1c65d3f0.js"><link rel="prefetch" href="/assets/js/47.b87f8963.js"><link rel="prefetch" href="/assets/js/48.c505e653.js"><link rel="prefetch" href="/assets/js/49.d3d42fdf.js"><link rel="prefetch" href="/assets/js/5.2ef4baa3.js"><link rel="prefetch" href="/assets/js/50.f684c220.js"><link rel="prefetch" href="/assets/js/51.bb7c2c14.js"><link rel="prefetch" href="/assets/js/52.975b16ac.js"><link rel="prefetch" href="/assets/js/53.38267dad.js"><link rel="prefetch" href="/assets/js/54.7068ac80.js"><link rel="prefetch" href="/assets/js/55.45e61a5e.js"><link rel="prefetch" href="/assets/js/56.9b7b4be1.js"><link rel="prefetch" href="/assets/js/58.a17a67f7.js"><link rel="prefetch" href="/assets/js/59.da37a4c2.js"><link rel="prefetch" href="/assets/js/6.cb890c70.js"><link rel="prefetch" href="/assets/js/60.28c23152.js"><link rel="prefetch" href="/assets/js/61.8db76213.js"><link rel="prefetch" href="/assets/js/62.9489450d.js"><link rel="prefetch" href="/assets/js/63.b9e124c6.js"><link rel="prefetch" href="/assets/js/64.81400e33.js"><link rel="prefetch" href="/assets/js/65.15a68ffc.js"><link rel="prefetch" href="/assets/js/66.6e1dac3c.js"><link rel="prefetch" href="/assets/js/67.77033608.js"><link rel="prefetch" href="/assets/js/68.c3573a97.js"><link rel="prefetch" href="/assets/js/69.65225641.js"><link rel="prefetch" href="/assets/js/7.84b489df.js"><link rel="prefetch" href="/assets/js/70.aebe855f.js"><link rel="prefetch" href="/assets/js/71.a1da6ec1.js"><link rel="prefetch" href="/assets/js/72.d0c56933.js"><link rel="prefetch" href="/assets/js/73.a09d8879.js"><link rel="prefetch" href="/assets/js/74.b4950e62.js"><link rel="prefetch" href="/assets/js/75.35ac5a27.js"><link rel="prefetch" href="/assets/js/76.a8b419f6.js"><link rel="prefetch" href="/assets/js/77.dea47ebf.js"><link rel="prefetch" href="/assets/js/78.2188f8e1.js"><link rel="prefetch" href="/assets/js/79.a69cf696.js"><link rel="prefetch" href="/assets/js/8.b01760b9.js"><link rel="prefetch" href="/assets/js/80.522784c2.js"><link rel="prefetch" href="/assets/js/81.4bcbba2c.js"><link rel="prefetch" href="/assets/js/82.64d88e47.js"><link rel="prefetch" href="/assets/js/83.4087010f.js"><link rel="prefetch" href="/assets/js/84.fd8b8f5b.js"><link rel="prefetch" href="/assets/js/85.e828c59a.js"><link rel="prefetch" href="/assets/js/86.a5f8fbc7.js"><link rel="prefetch" href="/assets/js/87.e59655bf.js"><link rel="prefetch" href="/assets/js/9.f1a91c1d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.bc4b65ce.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/deepin.png" alt="Documentation" class="logo"> <span class="site-name can-hide">Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><a href="/pages/3fd76c/" class="nav-link">指南</a></div><div class="nav-item"><a href="/pages/45e05f/" class="nav-link">DTK</a></div><div class="nav-item"><a href="/pages/c15bcd/" class="nav-link">经验分享</a></div><div class="nav-item"><a href="/pages/6903df/" class="nav-link">社区作品</a></div><div class="nav-item"><a href="/pages/3b5851/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Translation" class="dropdown-title"><!----> <span class="title" style="display:;">Translation</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">简体中文</a></li><li class="dropdown-item"><!----> <a href="/pages/ebde83/" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/pages/eb7707/" class="nav-link">Español</a></li></ul></div></div> <a href="https://github.com/linuxdeepin/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://raw.githubusercontent.com/xmuli/xmuliPic/pic/2020/DCIM.gif"> <div class="blogger-info"><h3>Deepin</h3> <span>Deepin 社区文档</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><a href="/pages/3fd76c/" class="nav-link">指南</a></div><div class="nav-item"><a href="/pages/45e05f/" class="nav-link">DTK</a></div><div class="nav-item"><a href="/pages/c15bcd/" class="nav-link">经验分享</a></div><div class="nav-item"><a href="/pages/6903df/" class="nav-link">社区作品</a></div><div class="nav-item"><a href="/pages/3b5851/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Translation" class="dropdown-title"><!----> <span class="title" style="display:;">Translation</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">简体中文</a></li><li class="dropdown-item"><!----> <a href="/pages/ebde83/" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/pages/eb7707/" class="nav-link">Español</a></li></ul></div></div> <a href="https://github.com/linuxdeepin/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/pages/6903df/" class="sidebar-link">READMEmd</a></li><li><a href="/pages/fb3f3a/" class="sidebar-link">dde-dock 开发网速插件 lfxSpeed</a></li><li><a href="/pages/6a3365/" class="sidebar-link">Deepin 自定义修改窗口圆角大小</a></li><li><a href="/pages/1acdc2/" aria-current="page" class="active sidebar-link">DTK常用和测试代码片</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/2bcddd/" class="sidebar-link">基于lfxSpeed制作的infomation-tips</a></li><li><a href="/pages/82ea0c/" class="sidebar-link">DDE Store</a></li></ul> </aside> <div><main class="page"> <div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1b7c64bb><div class="articleInfo" data-v-1b7c64bb><ul class="breadcrumbs" data-v-1b7c64bb><li data-v-1b7c64bb><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-1b7c64bb></a></li> <li data-v-1b7c64bb><span data-v-1b7c64bb>社区作品</span></li> <!----></ul> <div class="info" data-v-1b7c64bb><div title="作者" class="author iconfont icon-touxiang" data-v-1b7c64bb><a href="https://github.com/linuxdeepin" target="_blank" title="作者" class="beLink" data-v-1b7c64bb>Deepin | Any developer</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-1b7c64bb><a href="javascript:;" data-v-1b7c64bb>2020-05-14</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">
          DTK常用和测试代码片
        </h1> <div class="theme-vdoing-content content__default"><p><strong>简  述：</strong> <code>DTK</code> 常用和测试代码片，在 <code>deepin 20</code> 或 <code>uos 20</code> 中，全部使用 <code>DTK</code> 开发，其中有一些是经常遇到的定位 <code>bug</code> 和修改的代码片。在此抛转引玉，提交一点开发的贡献</p> <p>[TOC]</p> <br> <h3 id="开发环境"><a href="#开发环境" class="header-anchor">#</a> 开发环境：</h3> <p><strong>💻：</strong> <code>uos 20</code> 📎 <code>deepin 20</code> 📎 <code>gcc/g++ 8.3</code> 📎 <code>gdb8.0</code></p> <br> <h3 id="将-dtkwidget-项目注册到系统"><a href="#将-dtkwidget-项目注册到系统" class="header-anchor">#</a> 将 dtkwidget 项目注册到系统：</h3> <p>这里以 <code>dtkwidget</code> 为例，它在系统的动态库是存放路径为 <code>/usr/lib/x86_64-linux-gnu/</code></p> <img src="https://cdn.jsdelivr.net/gh/xmuli/xmuliPic@pic/2020/20200407_134649.png" width="100%"> <ul><li><strong>解答图片：</strong>
经过测试，系统库和 DTK 项目的生成的 libdtkwidget.so 实际使用的都是 最新的 5.xxx 版本，这里面的是 .so.5.1.0；系统库里面遗留下来的 2.xxx 版本可能是提供给某些没有v20版本的项目使用的。</li> <li>若是想要代码片生效的话，则将项目生成的 .so 文件替代换掉 系统路径下，若是有新的接口改动，那么对应的头文件也要一起替换掉</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">#【命令： 5.1.0 需要替换为实际的最大】</span>
<span class="token comment">#[拷贝二进制文件：]</span>
<span class="token function">sudo</span> <span class="token function">rm</span> -rf /usr/lib/x86_64-linux-gnu/libdtkwidget.so.5.1.0

<span class="token function">sudo</span> <span class="token function">cp</span>  <span class="token punctuation">..</span>/build-dtkwidget-unknown-Debug/src/libdtkwidget.so.5.1.0 /usr/lib/x86_64-linux-gnu/

<span class="token comment">#[拷贝头文件：]</span>
<span class="token function">sudo</span> <span class="token function">cp</span> /home/muli/project/dtkwidget/src/widgets/dslider.h /usr/include/libdtk-5.1.0/DWidget/
</code></pre></div><p><strong>PS（uos / deepin）：</strong></p> <p>对于 <code>dtkwidget</code> 项目会生成 <code>libdtkwidget.so</code> 动态库；系统存放路径为 <code>/usr/lib/x86_64-linux-gnu/</code> ；</p> <p>项目 <code>dtkgui</code> 会生成 <code>libdtkgui.so</code> 动态库文件；系统存放路径为 <code>/usr/lib/x86_64-linux-gnu/</code> ；</p> <p>项目 <code>qt5integration</code> 会生成 <code>libchameleon.so</code> 动态库文件在 <code>./bin/plugins/styles/libchameleon.so</code> 下 ；<code>/usr/lib/x86_64-linux-gnu/qt5/plugins/styles/</code></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">rm</span> -rf /usr/lib/x86_64-linux-gnu/qt5/plugins/styles/libchameleon.so
<span class="token function">sudo</span> <span class="token function">cp</span>  ./bin/plugins/styles/libchameleon.so /usr/lib/x86_64-linux-gnu/qt5/plugins/styles/
</code></pre></div><br> <br> <h3 id="判断-系统主题是浅色还是暗色"><a href="#判断-系统主题是浅色还是暗色" class="header-anchor">#</a> 判断 系统主题是浅色还是暗色：</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code>DGuiApplicationHelper <span class="token operator">*</span>guiAppHelp <span class="token operator">=</span> <span class="token class-name">DGuiApplicationHelper</span><span class="token operator">::</span><span class="token function">instance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>guiAppHelp<span class="token operator">-&gt;</span><span class="token function">themeType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> DGuiApplicationHelper<span class="token operator">::</span>ColorType<span class="token operator">::</span>DarkType<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//暗色主题</span>

<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>  <span class="token comment">//浅色主题</span>

<span class="token punctuation">}</span>
</code></pre></div><br> <h3 id="对某一颜色-在浅-暗主题对其亮度进行修改"><a href="#对某一颜色-在浅-暗主题对其亮度进行修改" class="header-anchor">#</a> 对某一颜色，在浅 / 暗主题对其亮度进行修改：</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token comment">//DGuiApplicationHelper::toColorType 获取颜色的明亮度，将其转换为主题类型的枚举值。</span>

QColor <span class="token function">lineColor</span><span class="token punctuation">(</span>opt<span class="token operator">-&gt;</span>palette<span class="token punctuation">.</span><span class="token function">color</span><span class="token punctuation">(</span>QPalette<span class="token operator">::</span>Base<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">DGuiApplicationHelper</span><span class="token operator">::</span><span class="token function">toColorType</span><span class="token punctuation">(</span>lineColor<span class="token punctuation">)</span> <span class="token operator">==</span> DGuiApplicationHelper<span class="token operator">::</span>LightType<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//此颜色在浅色主题下，亮度 -10</span>
	lineColor <span class="token operator">=</span> <span class="token class-name">DGuiApplicationHelper</span><span class="token operator">::</span><span class="token function">adjustColor</span><span class="token punctuation">(</span>color<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>  <span class="token comment">//此颜色在暗色色主题下，亮度 +10</span>
	lineColor <span class="token operator">=</span> <span class="token class-name">DGuiApplicationHelper</span><span class="token operator">::</span><span class="token function">adjustColor</span><span class="token punctuation">(</span>color<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">+</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><br> <h3 id="属性的使用"><a href="#属性的使用" class="header-anchor">#</a> 属性的使用：</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token function">Q_DECLARE_METATYPE</span><span class="token punctuation">(</span>QMargins<span class="token punctuation">)</span>
par<span class="token operator">-&gt;</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;_d_margins&quot;</span><span class="token punctuation">,</span> <span class="token class-name">QVariant</span><span class="token operator">::</span><span class="token function">fromValue</span><span class="token punctuation">(</span>margins<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

QMargins magins <span class="token operator">=</span> par<span class="token operator">-&gt;</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">&quot;_d_margins&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token operator">&lt;</span>QMargins<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>par<span class="token operator">-&gt;</span><span class="token function">property</span><span class="token punctuation">(</span><span class="token string">&quot;_d_margins&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isValid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	content<span class="token operator">-&gt;</span><span class="token function">setContentsMargins</span><span class="token punctuation">(</span><span class="token function">QMargins</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">else</span>
	content<span class="token operator">-&gt;</span><span class="token function">setContentsMargins</span><span class="token punctuation">(</span>magins<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><br> <h3 id="在-paintevent-里面获取一个颜色"><a href="#在-paintevent-里面获取一个颜色" class="header-anchor">#</a> 在 paintEvent() 里面获取一个颜色：</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">void</span> <span class="token class-name">SliderStrip</span><span class="token operator">::</span><span class="token function">paintEvent</span><span class="token punctuation">(</span>QPaintEvent <span class="token operator">*</span>event<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">Q_UNUSED</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span>
    QPainter <span class="token function">pa</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">auto</span> dpa <span class="token operator">=</span> <span class="token class-name">DApplicationHelper</span><span class="token operator">::</span><span class="token function">instance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">palette</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QPen penLine <span class="token operator">=</span> <span class="token function">QPen</span><span class="token punctuation">(</span>dpa<span class="token punctuation">.</span><span class="token function">textTips</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QPen penNumber <span class="token operator">=</span> <span class="token function">QPen</span><span class="token punctuation">(</span>dpa<span class="token punctuation">.</span><span class="token function">color</span><span class="token punctuation">(</span>DPalette<span class="token operator">::</span>ObviousBackground<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    pa<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>penLine<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><br> <h3 id="将自定义风格-应用于-其他的软件"><a href="#将自定义风格-应用于-其他的软件" class="header-anchor">#</a> 将自定义风格 应用于 其他的软件：</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>qtcreator -style windows

qtcreator -style chameleon
</code></pre></div><br> <h3 id="打印-qboxlayout里面的所有元素"><a href="#打印-qboxlayout里面的所有元素" class="header-anchor">#</a> 打印 QBoxLayout里面的所有元素：</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> d<span class="token operator">-&gt;</span>hBoxLayout<span class="token operator">-&gt;</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    QLayoutItem <span class="token operator">*</span>item <span class="token operator">=</span> <span class="token punctuation">(</span>QLayoutItem <span class="token operator">*</span><span class="token punctuation">)</span>d<span class="token operator">-&gt;</span>hBoxLayout<span class="token operator">-&gt;</span><span class="token function">itemAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span>i<span class="token operator">&lt;&lt;</span>item<span class="token operator">-&gt;</span><span class="token function">widget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><br> <h3 id="qt判断鼠标是否在某子窗口控件上方"><a href="#qt判断鼠标是否在某子窗口控件上方" class="header-anchor">#</a> QT判断鼠标是否在某子窗口控件上方：</h3> <p>需要注意的是，子窗口获取geometry，是相对于父窗口的相对位置，QCursor::pos()获取的是鼠标绝对位置，要不将父窗口的相对位置进行换算，要不将鼠标的绝对位置进行换算，这里本文采用将鼠标绝对位置换算到控件上，示例代码如下：</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">if</span><span class="token punctuation">(</span>ui<span class="token operator">-&gt;</span>groupBox<span class="token operator">-&gt;</span><span class="token function">geometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">mapFromGlobal</span><span class="token punctuation">(</span><span class="token class-name">QCursor</span><span class="token operator">::</span><span class="token function">pos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><br> <h3 id="获取项目中的-svg-图片资源"><a href="#获取项目中的-svg-图片资源" class="header-anchor">#</a> 获取项目中的 .svg 图片资源：</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token keyword">case</span> SP_DialogResetButton<span class="token operator">:</span>
            icon <span class="token operator">=</span> <span class="token class-name">QIcon</span><span class="token operator">::</span><span class="token function">fromTheme</span><span class="token punctuation">(</span><span class="token function">QLatin1String</span><span class="token punctuation">(</span><span class="token string">&quot;edit-clear&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><br> <h3 id="在-main-cpp-中修改测试代码"><a href="#在-main-cpp-中修改测试代码" class="header-anchor">#</a> 在 main.cpp 中修改测试代码：</h3> <p>在 <code>qt5integration</code> 的  main.cpp 中, 常用测试代码如下:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QApplication&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDebug&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QFileInfo&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDebug&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QTextBrowser&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QWidget&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QAction&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QMenu&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QList&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QPalette&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QPixmap&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QWidget&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;DLineEdit&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;DPasswordEdit&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;DScrollBar&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;DListView&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QStandardItemModel&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;DStandardItem&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;DDialog&gt;</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;DSuggestButton&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;DTitlebar&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;DComboBox&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;DProgressBar&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QTimer&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDialog&gt;</span></span>


DWIDGET_USE_NAMESPACE

<span class="token keyword">class</span> <span class="token class-name">ExWidget</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QWidget</span></span>
<span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">explicit</span> <span class="token function">ExWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">ExWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">contextMenuEvent</span><span class="token punctuation">(</span>QContextMenuEvent <span class="token operator">*</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;widgetgallery.h&quot;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">Q_INIT_RESOURCE</span><span class="token punctuation">(</span>styles<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//    qputenv(&quot;QT_DEBUG_PLUGINS&quot;, &quot;1&quot;);</span>
    QStringList paths <span class="token operator">=</span> <span class="token class-name">QApplication</span><span class="token operator">::</span><span class="token function">libraryPaths</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    paths<span class="token punctuation">.</span><span class="token function">prepend</span><span class="token punctuation">(</span><span class="token function">QFileInfo</span><span class="token punctuation">(</span><span class="token class-name">QString</span><span class="token operator">::</span><span class="token function">fromUtf8</span><span class="token punctuation">(</span>argv<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;/plugins&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">QApplication</span><span class="token operator">::</span><span class="token function">setLibraryPaths</span><span class="token punctuation">(</span>paths<span class="token punctuation">)</span><span class="token punctuation">;</span>

    QApplication <span class="token function">app</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//    WidgetGallery gallery;</span>
<span class="token comment">//    gallery.show();</span>

<span class="token comment">//    DDialog *dialog = new DDialog(&quot;title&quot;, &quot;mesg&quot;);</span>
<span class="token comment">//    dialog-&gt;show();</span>

    ExWidget<span class="token operator">*</span> exWidget <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ExWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    exWidget<span class="token operator">-&gt;</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> app<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">ExWidget</span><span class="token operator">::</span><span class="token function">ExWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">ExWidget</span><span class="token operator">::</span><span class="token operator">~</span><span class="token function">ExWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">ExWidget</span><span class="token operator">::</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">1100</span><span class="token punctuation">,</span> <span class="token number">720</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setWindowTitle</span><span class="token punctuation">(</span><span class="token string">&quot;example DTK&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//    moveToCenter(this);</span>
    <span class="token function">setContextMenuPolicy</span><span class="token punctuation">(</span>Qt<span class="token operator">::</span>DefaultContextMenu<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//DTitlebar Test--------------------------------------------------------------</span>
    DTitlebar<span class="token operator">*</span> titleBar <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">DTitlebar</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    titleBar<span class="token operator">-&gt;</span><span class="token function">setQuitMenuDisabled</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    titleBar<span class="token operator">-&gt;</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">620</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//--------------------------------------------------------------</span>
<span class="token comment">//    QPalette pale = this-&gt;palette();</span>
<span class="token comment">//    pale.setBrush(backgroundRole(),</span>
<span class="token comment">//                  Qt::white); //纯白</span>
<span class="token comment">//                  Qt::black); //黑色</span>
<span class="token comment">//                  QPixmap(&quot;/home/muli/softFile/netWallPaper/700047.jpg&quot;));</span>
<span class="token comment">//                  QPixmap(&quot;/home/muli/softFile/netWallPaper/499786.png&quot;));</span>
<span class="token comment">//                  QPixmap(&quot;/home/muli/softFile/netWallPaper/20200326.png&quot;));</span>
<span class="token comment">//                  QPixmap(&quot;/home/muli/Desktop/20200327_104540.png&quot;));</span>
<span class="token comment">//    setPalette(pale);</span>


    <span class="token comment">//DListView Test--------------------------------------------------------------</span>
    DListView <span class="token operator">*</span>listview <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">DListView</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QStandardItemModel <span class="token operator">*</span>model <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QStandardItemModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        DStandardItem <span class="token operator">*</span>item <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">DStandardItem</span><span class="token punctuation">(</span><span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">&quot;%1%1%1%1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        model<span class="token operator">-&gt;</span><span class="token function">appendRow</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    listview<span class="token operator">-&gt;</span><span class="token function">setModel</span><span class="token punctuation">(</span>model<span class="token punctuation">)</span><span class="token punctuation">;</span>
    listview<span class="token operator">-&gt;</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    listview<span class="token operator">-&gt;</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    listview<span class="token operator">-&gt;</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//DScrollbar Test--------------------------------------------------------------</span>
<span class="token comment">//    DScrollBar * scrollbar = new DScrollBar(this);</span>
<span class="token comment">//    scrollbar-&gt;move(50, 50);</span>
<span class="token comment">////    scrollbar-&gt;show();</span>

<span class="token comment">//    DScrollBar * scrollbar2 = new DScrollBar(this);</span>
<span class="token comment">//    scrollbar2-&gt;setOrientation(Qt::Horizontal);</span>
<span class="token comment">//    scrollbar2-&gt;move(200, 50);</span>
<span class="token comment">////    scrollbar2-&gt;show();</span>

    <span class="token comment">//DLineEdit Test--------------------------------------------------------------</span>
<span class="token comment">//    DLineEdit* lineEdit = new DLineEdit(this);</span>
<span class="token comment">//    lineEdit-&gt;resize(300, 40);</span>
<span class="token comment">//    lineEdit-&gt;setEchoMode(QLineEdit::Password);</span>
<span class="token comment">//    lineEdit-&gt;move(50, 40);</span>

<span class="token comment">//    DPasswordEdit* passEdit = new DPasswordEdit(this);</span>
<span class="token comment">//    passEdit-&gt;resize(300, 40);</span>
<span class="token comment">//    passEdit-&gt;move(50, 100);</span>

<span class="token comment">//    QLineEdit* edit = new QLineEdit(this);</span>
<span class="token comment">//    edit-&gt;resize(300, 40);</span>
<span class="token comment">//    edit-&gt;move(50, 150);</span>
<span class="token comment">//    edit-&gt;setEchoMode(QLineEdit::Password);</span>

    <span class="token comment">//DComboBox Test--------------------------------------------------------------</span>
<span class="token comment">//    DComboBox* combobox = new DComboBox(this);</span>
<span class="token comment">//    combobox-&gt;resize(300, 40);</span>
<span class="token comment">//    combobox-&gt;addItem(QIcon::fromTheme(&quot;edit&quot;), &quot;test 01&quot;);</span>
<span class="token comment">//    combobox-&gt;addItem(QIcon::fromTheme(&quot;button_add&quot;), &quot;test 02&quot;);</span>
<span class="token comment">//    combobox-&gt;addItem(QIcon::fromTheme(&quot;edit&quot;), &quot;test 03&quot;);</span>
<span class="token comment">//    combobox-&gt;addItem(QIcon::fromTheme(&quot;edit&quot;), &quot;test 04&quot;);</span>
<span class="token comment">//    combobox-&gt;move(50, 200);</span>

    <span class="token comment">//DPushButton Test--------------------------------------------------------------</span>
<span class="token comment">//    btn = new DPushButton(&quot;this&quot;, this);</span>
<span class="token comment">//    btn-&gt;resize(300, 50);</span>
<span class="token comment">//    btn-&gt;move(50, 50);</span>
<span class="token comment">//    btn-&gt;setGeometry(50,05,300,50);</span>

<span class="token comment">//    btn2 = new DPushButton(&quot;this a&quot;, this);</span>
<span class="token comment">//    btn2-&gt;resize(300, 50);</span>
<span class="token comment">//    btn2-&gt;move(360, 50);</span>

<span class="token comment">//    frame = new DFrame(this);</span>
<span class="token comment">//    frame-&gt;resize(300, 50);</span>
<span class="token comment">//    frame-&gt;move(50, 110);</span>
<span class="token comment">////    DStyle::setFrameRadius(frame, 16);</span>
<span class="token comment">//    frame-&gt;setStyleSheet(&quot;font: bold; font-size:20px; color: rgb(241, 70, 62)&quot;);</span>
<span class="token comment">//    frame-&gt;setFrameRounded(true);</span>

<span class="token comment">//    qDebug()&lt;&lt;&quot;--01--&quot;&lt;&lt;frame-&gt;rect();</span>


<span class="token comment">//DProgressBar Test--------------------------------------------------------------</span>

<span class="token comment">//    int nStar = 50;</span>
<span class="token comment">//    DProgressBar *proBar1 = new DProgressBar(this);</span>
<span class="token comment">//    proBar1-&gt;setOrientation(Qt::Horizontal);</span>
<span class="token comment">//    proBar1-&gt;move(50, 50);</span>
<span class="token comment">//    proBar1-&gt;resize(300, 50);</span>
<span class="token comment">//    proBar1-&gt;setRange(0, 100);</span>
<span class="token comment">//    proBar1-&gt;setValue(nStar);</span>
<span class="token comment">////    proBar1-&gt;setAlignment(Qt::AlignCenter);</span>
<span class="token comment">//    proBar1-&gt;show();</span>

<span class="token comment">//    DProgressBar *proBar2 = new DProgressBar(this);</span>
<span class="token comment">//    proBar2-&gt;setOrientation(Qt::Vertical);</span>
<span class="token comment">//    proBar2-&gt;move(400, 50);</span>
<span class="token comment">//    proBar2-&gt;resize(50, 300);</span>
<span class="token comment">//    proBar2-&gt;setRange(0, 100);</span>
<span class="token comment">//    proBar2-&gt;setValue(nStar);</span>
<span class="token comment">//    proBar2-&gt;show();</span>

<span class="token comment">//    DProgressBar *proBar3 = new DProgressBar(this);</span>
<span class="token comment">//    proBar3-&gt;setOrientation(Qt::Horizontal);</span>
<span class="token comment">//    proBar3-&gt;move(50, 200);</span>
<span class="token comment">//    proBar3-&gt;resize(300, 8);</span>
<span class="token comment">//    proBar3-&gt;setRange(0, 100);</span>
<span class="token comment">//    proBar3-&gt;setValue(nStar);</span>
<span class="token comment">////    proBar3-&gt;setAlignment(Qt::AlignCenter);</span>
<span class="token comment">//    proBar3-&gt;show();</span>

<span class="token comment">//    DProgressBar *proBar4 = new DProgressBar(this);</span>
<span class="token comment">//    proBar4-&gt;setOrientation(Qt::Vertical);</span>
<span class="token comment">//    proBar4-&gt;move(500, 50);</span>
<span class="token comment">//    proBar4-&gt;resize(8, 300);</span>
<span class="token comment">//    proBar4-&gt;setRange(0, 100);</span>
<span class="token comment">//    proBar4-&gt;setValue(nStar);</span>
<span class="token comment">//    proBar4-&gt;show();</span>


<span class="token comment">//    QTimer *timer = new QTimer(this);</span>
<span class="token comment">//    timer-&gt;start();</span>
<span class="token comment">//    timer-&gt;setInterval(50);</span>

<span class="token comment">//    connect(timer, &amp;QTimer::timeout, [=](){</span>
<span class="token comment">//        if (proBar1-&gt;value() &gt;= 100)</span>
<span class="token comment">//            proBar1-&gt;setValue(0);</span>
<span class="token comment">//        proBar1-&gt;setValue(proBar1-&gt;value() + 1);</span>

<span class="token comment">//        if (proBar2-&gt;value() &gt;= 100)</span>
<span class="token comment">//            proBar2-&gt;setValue(0);</span>
<span class="token comment">//        proBar2-&gt;setValue(proBar2-&gt;value() + 1);</span>

<span class="token comment">//        if (proBar3-&gt;value() &gt;= 100)</span>
<span class="token comment">//            proBar3-&gt;setValue(0);</span>
<span class="token comment">//        proBar3-&gt;setValue(proBar3-&gt;value() + 1);</span>

<span class="token comment">//        if (proBar4-&gt;value() &gt;= 100)</span>
<span class="token comment">//            proBar4-&gt;setValue(0);</span>
<span class="token comment">//        proBar4-&gt;setValue(proBar4-&gt;value() + 1);</span>
<span class="token comment">//        });</span>

<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">ExWidget</span><span class="token operator">::</span><span class="token function">contextMenuEvent</span><span class="token punctuation">(</span>QContextMenuEvent <span class="token operator">*</span>event<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">Q_UNUSED</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span>

    QMenu<span class="token operator">*</span> menu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QMenu</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">50</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        QString str <span class="token operator">=</span> <span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">&quot;act   %1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        menu<span class="token operator">-&gt;</span><span class="token function">addAction</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
        menu<span class="token operator">-&gt;</span><span class="token function">addSeparator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    menu<span class="token operator">-&gt;</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token class-name">QCursor</span><span class="token operator">::</span><span class="token function">pos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><br> <h3 id="下载地址"><a href="#下载地址" class="header-anchor">#</a> 下载地址：</h3> <p><a href="https://github.com/xmuli/QtExamples" target="_blank" rel="noopener noreferrer">QtExamples<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>欢迎 star 和 fork 这个系列的 linux 学习，附学习由浅入深的目录。</p></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/linuxdeepin/docs/edit/master/docs/03.社区作品/04.DTK常用和测试代码片.md" target="_blank" rel="noopener noreferrer">帮助编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">12/17/2020, 2:19:01 AM</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/6a3365/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Deepin 自定义修改窗口圆角大小</div></a> <a href="/pages/2bcddd/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">基于lfxSpeed制作的infomation-tips</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/6a3365/" class="prev">Deepin 自定义修改窗口圆角大小</a></span> <span class="next"><a href="/pages/2bcddd/">基于lfxSpeed制作的infomation-tips</a>→
      </span></p></div></div></div> <!----> </main></div> <div class="footer"><div class="icons"><a href="mailto:github@uniontech.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/linuxdeepin/docs" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2020-2021
    <span>Deepin | MIT License</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">跟随系统</li><li class="iconfont icon-rijianmoshi">浅色模式</li><li class="iconfont icon-yejianmoshi">深色模式</li><li class="iconfont icon-yuedu">阅读模式</li></ul></div></div> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.68231c63.js" defer></script><script src="/assets/js/2.ed4cc2e0.js" defer></script><script src="/assets/js/57.16a4cc70.js" defer></script>
  </body>
</html>