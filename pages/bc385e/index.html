<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>双屏幕设置 | Documentation</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Deepin Documentation">
    <link rel="preload" href="/assets/css/0.styles.bc4b65ce.css" as="style"><link rel="preload" href="/assets/js/app.68231c63.js" as="script"><link rel="preload" href="/assets/js/2.ed4cc2e0.js" as="script"><link rel="preload" href="/assets/js/53.38267dad.js" as="script"><link rel="prefetch" href="/assets/js/10.2bd85e5c.js"><link rel="prefetch" href="/assets/js/11.0af4eec8.js"><link rel="prefetch" href="/assets/js/12.f7d8be6b.js"><link rel="prefetch" href="/assets/js/13.3e81b361.js"><link rel="prefetch" href="/assets/js/14.3f6a4495.js"><link rel="prefetch" href="/assets/js/15.8abbe16c.js"><link rel="prefetch" href="/assets/js/16.5067aa23.js"><link rel="prefetch" href="/assets/js/17.efeeb296.js"><link rel="prefetch" href="/assets/js/18.fc35c73b.js"><link rel="prefetch" href="/assets/js/19.286ac6af.js"><link rel="prefetch" href="/assets/js/20.dbbd6858.js"><link rel="prefetch" href="/assets/js/21.3e348f42.js"><link rel="prefetch" href="/assets/js/22.e78ebd8a.js"><link rel="prefetch" href="/assets/js/23.0a8271cb.js"><link rel="prefetch" href="/assets/js/24.79750299.js"><link rel="prefetch" href="/assets/js/25.9e0c9c1a.js"><link rel="prefetch" href="/assets/js/26.02e95a8d.js"><link rel="prefetch" href="/assets/js/27.da4a30bf.js"><link rel="prefetch" href="/assets/js/28.7984ec8e.js"><link rel="prefetch" href="/assets/js/29.7bff8d99.js"><link rel="prefetch" href="/assets/js/3.fc576a5e.js"><link rel="prefetch" href="/assets/js/30.8f81354f.js"><link rel="prefetch" href="/assets/js/31.45977fbc.js"><link rel="prefetch" href="/assets/js/32.e9979d0f.js"><link rel="prefetch" href="/assets/js/33.57fbc3c2.js"><link rel="prefetch" href="/assets/js/34.efded599.js"><link rel="prefetch" href="/assets/js/35.fda1478a.js"><link rel="prefetch" href="/assets/js/36.e135385a.js"><link rel="prefetch" href="/assets/js/37.1ba6d1c3.js"><link rel="prefetch" href="/assets/js/38.3a309d36.js"><link rel="prefetch" href="/assets/js/39.da4cd589.js"><link rel="prefetch" href="/assets/js/4.325b2889.js"><link rel="prefetch" href="/assets/js/40.5a06bce9.js"><link rel="prefetch" href="/assets/js/41.d38e1eb2.js"><link rel="prefetch" href="/assets/js/42.04aada46.js"><link rel="prefetch" href="/assets/js/43.09440282.js"><link rel="prefetch" href="/assets/js/44.9c0a4379.js"><link rel="prefetch" href="/assets/js/45.389a08da.js"><link rel="prefetch" href="/assets/js/46.1c65d3f0.js"><link rel="prefetch" href="/assets/js/47.b87f8963.js"><link rel="prefetch" href="/assets/js/48.c505e653.js"><link rel="prefetch" href="/assets/js/49.d3d42fdf.js"><link rel="prefetch" href="/assets/js/5.2ef4baa3.js"><link rel="prefetch" href="/assets/js/50.f684c220.js"><link rel="prefetch" href="/assets/js/51.bb7c2c14.js"><link rel="prefetch" href="/assets/js/52.975b16ac.js"><link rel="prefetch" href="/assets/js/54.7068ac80.js"><link rel="prefetch" href="/assets/js/55.45e61a5e.js"><link rel="prefetch" href="/assets/js/56.9b7b4be1.js"><link rel="prefetch" href="/assets/js/57.16a4cc70.js"><link rel="prefetch" href="/assets/js/58.a17a67f7.js"><link rel="prefetch" href="/assets/js/59.da37a4c2.js"><link rel="prefetch" href="/assets/js/6.cb890c70.js"><link rel="prefetch" href="/assets/js/60.28c23152.js"><link rel="prefetch" href="/assets/js/61.8db76213.js"><link rel="prefetch" href="/assets/js/62.9489450d.js"><link rel="prefetch" href="/assets/js/63.b9e124c6.js"><link rel="prefetch" href="/assets/js/64.81400e33.js"><link rel="prefetch" href="/assets/js/65.15a68ffc.js"><link rel="prefetch" href="/assets/js/66.6e1dac3c.js"><link rel="prefetch" href="/assets/js/67.77033608.js"><link rel="prefetch" href="/assets/js/68.c3573a97.js"><link rel="prefetch" href="/assets/js/69.65225641.js"><link rel="prefetch" href="/assets/js/7.84b489df.js"><link rel="prefetch" href="/assets/js/70.aebe855f.js"><link rel="prefetch" href="/assets/js/71.a1da6ec1.js"><link rel="prefetch" href="/assets/js/72.d0c56933.js"><link rel="prefetch" href="/assets/js/73.a09d8879.js"><link rel="prefetch" href="/assets/js/74.b4950e62.js"><link rel="prefetch" href="/assets/js/75.35ac5a27.js"><link rel="prefetch" href="/assets/js/76.a8b419f6.js"><link rel="prefetch" href="/assets/js/77.dea47ebf.js"><link rel="prefetch" href="/assets/js/78.2188f8e1.js"><link rel="prefetch" href="/assets/js/79.a69cf696.js"><link rel="prefetch" href="/assets/js/8.b01760b9.js"><link rel="prefetch" href="/assets/js/80.522784c2.js"><link rel="prefetch" href="/assets/js/81.4bcbba2c.js"><link rel="prefetch" href="/assets/js/82.64d88e47.js"><link rel="prefetch" href="/assets/js/83.4087010f.js"><link rel="prefetch" href="/assets/js/84.fd8b8f5b.js"><link rel="prefetch" href="/assets/js/85.e828c59a.js"><link rel="prefetch" href="/assets/js/86.a5f8fbc7.js"><link rel="prefetch" href="/assets/js/87.e59655bf.js"><link rel="prefetch" href="/assets/js/9.f1a91c1d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.bc4b65ce.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/deepin.png" alt="Documentation" class="logo"> <span class="site-name can-hide">Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><a href="/pages/3fd76c/" class="nav-link">指南</a></div><div class="nav-item"><a href="/pages/45e05f/" class="nav-link">DTK</a></div><div class="nav-item"><a href="/pages/c15bcd/" class="nav-link">经验分享</a></div><div class="nav-item"><a href="/pages/6903df/" class="nav-link">社区作品</a></div><div class="nav-item"><a href="/pages/3b5851/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Translation" class="dropdown-title"><!----> <span class="title" style="display:;">Translation</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">简体中文</a></li><li class="dropdown-item"><!----> <a href="/pages/ebde83/" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/pages/eb7707/" class="nav-link">Español</a></li></ul></div></div> <a href="https://github.com/linuxdeepin/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://raw.githubusercontent.com/xmuli/xmuliPic/pic/2020/DCIM.gif"> <div class="blogger-info"><h3>Deepin</h3> <span>Deepin 社区文档</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><a href="/pages/3fd76c/" class="nav-link">指南</a></div><div class="nav-item"><a href="/pages/45e05f/" class="nav-link">DTK</a></div><div class="nav-item"><a href="/pages/c15bcd/" class="nav-link">经验分享</a></div><div class="nav-item"><a href="/pages/6903df/" class="nav-link">社区作品</a></div><div class="nav-item"><a href="/pages/3b5851/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Translation" class="dropdown-title"><!----> <span class="title" style="display:;">Translation</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">简体中文</a></li><li class="dropdown-item"><!----> <a href="/pages/ebde83/" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/pages/eb7707/" class="nav-link">Español</a></li></ul></div></div> <a href="https://github.com/linuxdeepin/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/pages/c15bcd/" class="sidebar-link">READMEmd</a></li><li><a href="/pages/b45fca/" class="sidebar-link">Deepin初上手攻略</a></li><li><a href="/pages/bc385e/" aria-current="page" class="active sidebar-link">双屏幕设置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/bc385e/#x-window-system" class="sidebar-link">X Window System</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/bc385e/#什么是-x-window-system" class="sidebar-link">什么是 X Window System？</a></li><li class="sidebar-sub-header"><a href="/pages/bc385e/#配置-x-server" class="sidebar-link">配置 X Server</a></li><li class="sidebar-sub-header"><a href="/pages/bc385e/#让我来康康-xorg-conf-写的啥" class="sidebar-link">让我来康康 xorg.conf 写的啥</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/bc385e/#xrandr" class="sidebar-link">XRandR</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/bc385e/#这玩意儿怎么用" class="sidebar-link">这玩意儿怎么用？</a></li><li class="sidebar-sub-header"><a href="/pages/bc385e/#哥追求的是个性化" class="sidebar-link">哥追求的是个性化</a></li><li class="sidebar-sub-header"><a href="/pages/bc385e/#多显示器怎么设置呢" class="sidebar-link">多显示器怎么设置呢？</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/bc385e/#开始多屏幕设置吧" class="sidebar-link">开始多屏幕设置吧</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/bc385e/#最简单的情况" class="sidebar-link">最简单的情况</a></li><li class="sidebar-sub-header"><a href="/pages/bc385e/#如何保存配置" class="sidebar-link">如何保存配置？</a></li><li class="sidebar-sub-header"><a href="/pages/bc385e/#复杂一点的情况" class="sidebar-link">复杂一点的情况</a></li><li class="sidebar-sub-header"><a href="/pages/bc385e/#错误诊断" class="sidebar-link">错误诊断</a></li></ul></li></ul></li></ul> </aside> <div><main class="page"> <div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1b7c64bb><div class="articleInfo" data-v-1b7c64bb><ul class="breadcrumbs" data-v-1b7c64bb><li data-v-1b7c64bb><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-1b7c64bb></a></li> <li data-v-1b7c64bb><span data-v-1b7c64bb>经验分享</span></li> <!----></ul> <div class="info" data-v-1b7c64bb><div title="作者" class="author iconfont icon-touxiang" data-v-1b7c64bb><a href="https://github.com/linuxdeepin" target="_blank" title="作者" class="beLink" data-v-1b7c64bb>Deepin | Any developer</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-1b7c64bb><a href="javascript:;" data-v-1b7c64bb>2021-01-24</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">
          双屏幕设置
        </h1> <div class="theme-vdoing-content content__default"><h1 id="手把手教你设置双屏幕-从理论到实践"><a href="#手把手教你设置双屏幕-从理论到实践" class="header-anchor">#</a> 手把手教你设置双屏幕——从理论到实践</h1> <p>前段时间因工作需要，买了一个显示器，准备外接到我的笔记本电脑上作双屏幕。KuaKuaKua 线装完之后，显示器提示没信号，笔记本也检测不到显示器连接的信息。这可坏了！在网上尝试了各种方法都无果，我都一度以为是新买的显示器有问题，不过最后还是在朋友 <a href="liuxj@smail.nju.edu.cn">鸡哥</a> 的帮助下厘清了困难，解决了难题。</p> <p>使用 Deepin 系统设置双屏幕确实颇费周折，不像 Windows 线一插上就万事大吉了。而且遇到问题也需要一些 Linux 相关的背景知识，才能自己着手解决。因此，这篇文章将会先从 Linux 显示设置的相关背景知识入手——<a href="#x-window-system">X Window System</a> 和 <a href="#xrandr">XRandR</a>，然后再开始手把手讲解 <a href="#%E5%BC%80%E5%A7%8B%E5%A4%9A%E5%B1%8F%E5%B9%95%E8%AE%BE%E7%BD%AE%E5%90%A7">设置多屏幕的方法</a>。相比于直接告诉你怎么设置，本文还是倾向于先告诉你原理，然后再一步一步带你完成自己想要的设置。如果小伙伴对这些背景知识不感兴趣，可以直接跳过。</p> <p>那事不宜迟，我们就开始吧！</p> <p><font color="#6ba5fc" size="4">文章目录</font></p> <p></p><div class="table-of-contents"><ul><li><a href="#x-window-system">X Window System</a><ul><li><a href="#什么是-x-window-system">什么是 X Window System？</a></li><li><a href="#配置-x-server">配置 X Server</a></li><li><a href="#让我来康康-xorg-conf-写的啥">让我来康康 xorg.conf 写的啥</a></li></ul></li><li><a href="#xrandr">XRandR</a><ul><li><a href="#这玩意儿怎么用">这玩意儿怎么用？</a></li><li><a href="#哥追求的是个性化">哥追求的是个性化</a></li><li><a href="#多显示器怎么设置呢">多显示器怎么设置呢？</a></li></ul></li><li><a href="#开始多屏幕设置吧">开始多屏幕设置吧</a><ul><li><a href="#最简单的情况">最简单的情况</a></li><li><a href="#如何保存配置">如何保存配置？</a></li><li><a href="#复杂一点的情况">复杂一点的情况</a></li><li><a href="#错误诊断">错误诊断</a></li></ul></li></ul></div> <br><p></p> <h2 id="x-window-system"><a href="#x-window-system" class="header-anchor">#</a> X Window System</h2> <p>要接触 Linux 系统桌面显示相关的设置，那就不得不先请出鼎鼎有名的 X Window System。</p> <h3 id="什么是-x-window-system"><a href="#什么是-x-window-system" class="header-anchor">#</a> 什么是 X Window System？</h3> <p>X Window System 是最早由 MIT 在1984年发展出来的一个基于网络架构的图形用户接口（Graphical User Interface, GUI）软件，可以说是历史十分悠久了。X Window System 简称为 X 或 X11。现在主流的 Linux 桌面系统，都基于 X 架构。因此，我们还是要了解一下 X Window System 比较好，这样系统的桌面环境出现了问题，我们才能找到办法去解决。</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>这个图形用户接口为何称为 X 呢？因为 X 字母排在 W(indow) 后面，意味下一代的新窗口。称之为 X11 是因为在1987年的时候，X Window System 已经迭代到了第11个版本，后续所有的 X ，都是基于 X11 版本发展而来的（后续变动都比较小) 。</p></div> <p>我们可以使用如下命令来检查当前系统的 X 版本。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$<span class="token operator">&gt;</span> X -version

X.Org X Server <span class="token number">1.20</span>.4
X Protocol Version <span class="token number">11</span>, Revision <span class="token number">0</span>
Build Operating System: Linux <span class="token number">4.19</span>.0-6-server-amd64 x86_64 Uos
Current Operating System: Linux aaron-PC <span class="token number">5.4</span>.70-amd64-desktop <span class="token comment">#1 SMP Wed Oct 14 15:24:23 CST 2020 x86_64</span>
Kernel <span class="token builtin class-name">command</span> line: <span class="token assign-left variable">BOOT_IMAGE</span><span class="token operator">=</span>/vmlinuz-5.4.70-amd64-desktop <span class="token assign-left variable">root</span><span class="token operator">=</span>UUID<span class="token operator">=</span>a8a31905-1d52-441d-ae51-72ccd185ca09 ro splash quiet <span class="token assign-left variable">DEEPIN_GFXMODE</span><span class="token operator">=</span>
Build Date: <span class="token number">11</span> November <span class="token number">2020</span>  07:02:46AM
xorg-server <span class="token number">2</span>:1.20.4.9-1+dde <span class="token punctuation">(</span>https://www.debian.org/support<span class="token punctuation">)</span> 
Current version of pixman: <span class="token number">0.36</span>.0
        Before reporting problems, check http://wiki.x.org
        to <span class="token function">make</span> sure that you have the latest version.
</code></pre></div><p>可以知道，我们的 Deepin 桌面基于的是 Xorg1.20.4 版本。如果遇到问题，可以到 <a href="wiki.x.org">wiki.x.org</a> 网站上去查询。</p> <p>X 架构主要由两个组件构成—— X Server 负责管理硬件，X Client 负责管理应用程序。在运行时，X Client 应用程序会将想要绘制的图形告知 X Server，最终由 X Server 来将结果通过它所管理的硬件绘制出来。X Server 主要管理的是显卡、屏幕分辨率、鼠标按键对应等。其中对于显卡的识别，尤其重要！我们想要部署好电脑上的显卡，就绕不开与 X Server 打交道。</p> <h3 id="配置-x-server"><a href="#配置-x-server" class="header-anchor">#</a> 配置 X Server</h3> <p>基本上，X Server 的配置文件都是默认放置在 <code>/etc/X11</code> 目录下，管理硬件的总管模块放在 <code>/usr/lib64/xorg/modules</code> 下面，显卡驱动模块就放在该目录下的 <code>drivers</code> 文件夹中。X 使用了一个统一的配置文件来规范这些内容，这个配置文件就是 <code>/etc/X11/xorg.conf</code>。</p> <p>现在 X Server 在每次启动时都会自行检查系统上的显卡、屏幕等信息，然后自行搭配优化的驱动程序进行加载。因此 <code>xorg.conf</code> 这个配置文件在默认情况下是不需要的。不过如果你打算自行配置 X Server 的各项参数，可以在 <code>/etc/X11</code> 目录下自行创建 <code>xorg.conf</code> 。如果你只想加入或修改部分设置，那么可以在 <code>/etc/X11/xorg.conf.d</code> 目录下建立后缀为 <code>.conf</code> 的文件，将你需要的额外选项加进去就行了。这样一来，X Server 就不会每个设置都以 <code>xorg.conf</code> 为主了。</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>自行创建 <code>xorg.conf</code>？听起来好复杂，我怎么知道 <code>xorg.conf</code> 里该写些什么东西？不用着急，实际上 X 会为我们准备好 <code>xorg.conf</code> 的模板。我们首先要关闭 X Server，然后执行 <code>X --configure</code> 命令，X 就会生成模板 <code>xorg.conf.new</code>，并告诉我们它存放的位置。我们只需要在模板上进行少量修改，然后放到 <code>/etc/X11</code> 目录下改名为 <code>xorg.conf</code> 就会生效啦！更多关于如何使用 <code>xorg.conf</code> 的信息可以参见 <a href="https://wiki.archlinux.org/index.php/xorg#Using_.conf_files" target="_blank" rel="noopener noreferrer">Using .conf files<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p></div> <p>X Server 的日志信息在 <code>/var/log/Xorg.0.log</code> 中。该文件前几行会说明使用的配置文件是来自哪里的，这样我们就知道该修改哪里的配置文件啦！</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>修改配置文件时，一定要提前做好备份！免得改错了什么东西，导致连 X Server 都无法启动了，那就糟糕了。</p></div> <h3 id="让我来康康-xorg-conf-写的啥"><a href="#让我来康康-xorg-conf-写的啥" class="header-anchor">#</a> 让我来康康 xorg.conf 写的啥</h3> <p>xorg.conf 文件的内容是分成数个段落的，每个段落以 <code>Section</code> 开始，以 <code>EndSection</code> 结束，里面含有该段落相关的设定值，例如：</p> <div class="language-python extra-class"><pre class="language-python"><code>Section <span class="token string">&quot;Section name&quot;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>		<span class="token operator">&lt;=</span><span class="token operator">=</span> 与这个 Section name 有关的选项设置
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
EndSection
</code></pre></div><p>常见的 Section 主要有：</p> <ol><li>Module：被加载到 X Server 当中的模块（某些功能的驱动程序）；</li> <li>Monitor：显示器的格式，主要是设置刷新率，与硬件有关；</li> <li>Device：这个重要，就是显卡的相关设置；</li> <li>Screen：这个是在屏幕上显示的相关分辨率与色彩深度的设置选项，与显示设置相关；</li> <li>Server Layout：上述的每个选项都可以重复设置，这里则是 X Server 要使用哪个选项值的设置。</li></ol> <p>设置完成后，需要重启 X Server 才会生效。</p> <p>xorg.conf 各个 Section 的作用以及详细可用参数，可以查阅 <a href="https://www.x.org/releases/current/doc/man/man5/xorg.conf.5.xhtml" target="_blank" rel="noopener noreferrer">xorg.conf 手册<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h2 id="xrandr"><a href="#xrandr" class="header-anchor">#</a> XRandR</h2> <p>XRandR 是 X11 提供的 RandR（Resize and Rotate）拓展配置工具。它可以被用来设置屏幕的大小、旋转，以及多屏幕显示。下面我们来看看 XRandR 的一些简单操作方法。</p> <h3 id="这玩意儿怎么用"><a href="#这玩意儿怎么用" class="header-anchor">#</a> 这玩意儿怎么用？</h3> <p>使用 <code>xrandr</code> 命令可以查看当前的显示参数。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$<span class="token operator">&gt;</span> xrandr
Screen <span class="token number">0</span>: minimum <span class="token number">8</span> x <span class="token number">8</span>, current <span class="token number">3840</span> x <span class="token number">1080</span>, maximum <span class="token number">32767</span> x <span class="token number">32767</span>
DP-0 disconnected <span class="token punctuation">(</span>normal left inverted right x axis y axis<span class="token punctuation">)</span>
HDMI-0 connected primary 1920x1080+1920+0 <span class="token punctuation">(</span>normal left inverted right x axis y axis<span class="token punctuation">)</span> 527mm x 293mm
   1920x1080     <span class="token number">60.00</span>*+  <span class="token number">74.99</span>    <span class="token number">59.94</span>    <span class="token number">50.00</span>    <span class="token number">60.00</span>    <span class="token number">50.04</span>  
   1680x1050     <span class="token number">59.95</span>  
   1600x900      <span class="token number">60.00</span> 
…
</code></pre></div><p>我们可以使用如下命令设置 <code>HDMI-0</code> 的分辨率。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$<span class="token operator">&gt;</span> xrandr --output HDMI-0 --mode 1920x1080
</code></pre></div><p><code>--auto</code> 参数可以打开指定的视频输出，并为其自动设置分辨率。关闭视频输出可以用 <code>--off</code> 参数。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$<span class="token operator">&gt;</span> xrandr --output HDMI-0 --auto	<span class="token comment">#打开 HDMI-0</span>
$<span class="token operator">&gt;</span> xrandr --output HDMI-0 --off		<span class="token comment">#关闭 HDMI-0</span>
</code></pre></div><p><code>--listproviders</code> 参数可以查看当前的提供视频输出的设备（显卡）。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$<span class="token operator">&gt;</span> xrandr --listproviders
Providers: number <span class="token builtin class-name">:</span> <span class="token number">2</span>
Provider <span class="token number">0</span>: id: 0x24e cap: 0x1, Source Output crtcs: <span class="token number">4</span> outputs: <span class="token number">3</span> associated providers: <span class="token number">1</span> name:NVIDIA-0
Provider <span class="token number">1</span>: id: 0x47 cap: 0xb, Source Output, Sink Output, Sink Offload crtcs: <span class="token number">4</span> outputs: <span class="token number">4</span> associated providers: <span class="token number">1</span> name:Intel
</code></pre></div><p>更完整的 XRandR 使用方法，可以参见 <a href="https://wiki.archlinux.org/index.php/xrandr" target="_blank" rel="noopener noreferrer">XRandR 的 Archlinux百科<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h3 id="哥追求的是个性化"><a href="#哥追求的是个性化" class="header-anchor">#</a> 哥追求的是个性化</h3> <p><code>1920x1080</code> 是 XRandR 预设的一个显示器参数设置。如果要设置自己的想要的分辨率和刷新率，可以通过 <code>gtf</code> 命令来得到相应的 mode 模板。<code>gtf</code> 后面接三个参数——水平像素、垂直参数、刷新率。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 使用 1680x1050 的分辨率，使用 120Hz 的刷新率</span>
$<span class="token operator">&gt;</span> gtf <span class="token number">1680</span> <span class="token number">1050</span> <span class="token number">120</span>

  <span class="token comment"># 1680x1050 @ 120.00 Hz (GTF) hsync: 135.00 kHz; pclk: 313.20 MHz</span>
  Modeline <span class="token string">&quot;1680x1050_120.00&quot;</span>  <span class="token number">313.20</span>  <span class="token number">1680</span> <span class="token number">1816</span> <span class="token number">2000</span> <span class="token number">2320</span>  <span class="token number">1050</span> <span class="token number">1051</span> <span class="token number">1054</span> <span class="token number">1125</span>  -HSync +Vsync
</code></pre></div><p>然后将 Modeline 后面的内容复制下来，粘贴到 <code>xrandr</code> 命令的 <code>--mode</code> 后面，如下所示。运行即可。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$<span class="token operator">&gt;</span> xrandr --output HDMI-0 --mode <span class="token number">313.20</span>  <span class="token number">1680</span> <span class="token number">1816</span> <span class="token number">2000</span> <span class="token number">2320</span>  <span class="token number">1050</span> <span class="token number">1051</span> <span class="token number">1054</span> <span class="token number">1125</span>  -HSync +Vsync
</code></pre></div><h3 id="多显示器怎么设置呢"><a href="#多显示器怎么设置呢" class="header-anchor">#</a> 多显示器怎么设置呢？</h3> <p>如果你是多显示器用户，XRandR 可以帮助你设置多个屏幕之间的相对位置（使用 <code>--right-of</code>、<code>--left-of</code>、<code>--above</code>、<code>--below</code> 参数），或者设置屏幕绝对坐标（使用 <code>--pos</code> 参数）。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 放置屏幕 HDMI-0 在屏幕 DP-0 的右边</span>
$ xrandr --output DP-0 --auto --output HDMI-0 --auto --right-of DP-0
</code></pre></div><p>更多多显示器的设置方法，可以参见 <a href="https://wiki.archlinux.org/index.php/Multihead#Configuration_using_xrandr" target="_blank" rel="noopener noreferrer">Configuration using xrandr<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>调整多屏幕间位置，推荐使用 XRandR 的可视化终端 ARandR，可以直观便捷地通过鼠标拖动设置屏幕直接的位置关系。使用 <code>sudo apt install arandr</code> 指令进行下载。不推荐在 Deepin <code>设置-显示</code> 中直接进行多屏幕调整，目前其功能不完善，漏洞百出。</p></div> <h2 id="开始多屏幕设置吧"><a href="#开始多屏幕设置吧" class="header-anchor">#</a> 开始多屏幕设置吧</h2> <p>前面一口气讲了好多的背景知识，这一节我们就来看看，如何上手一步一步配置好我们的多屏幕吧～</p> <h3 id="最简单的情况"><a href="#最简单的情况" class="header-anchor">#</a> 最简单的情况</h3> <p>假设我们的主机连有两个显示器，分别接在 HDMI 口和 DP 口上。设置步骤如下：</p> <ol><li>连接好主机与显示器。使用 <code>xrandr</code> 命令检查 HDMI-0 和 DP-0 是否连接成功，连接成功的输出口会显示 <code>connected</code> 字样，反之就为 <code>disconnected</code>。</li> <li>设置屏幕之间的相对位置。（可以用下面的指令，也可以直接用 ARandR）</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 放置屏幕 HDMI-0 在屏幕 DP-0 的右边（屏幕拓展）</span>
$ xrandr --output DP-0 --auto --output HDMI-0 --auto --right-of DP-0
<span class="token comment"># 屏幕 HDMI-0 和屏幕 DP-0 显示相同的内容（屏幕复制）</span>
$ xrandr --output DP-0 --auto --output HDMI-0 --auto --same-as DP-0
</code></pre></div><p>这样简单的两个步骤之后，多屏幕就设置好啦。但是，这样配置之后，每次重新启动电脑都需要重新配置一次，因为电脑并不会保存我们在控制台中的更改。那有没有办法使我们的配置永久生效呢？</p> <h3 id="如何保存配置"><a href="#如何保存配置" class="header-anchor">#</a> 如何保存配置？</h3> <p>实际上，我们有多种方法来预设好我们的屏幕扩展参数，在开机时让 X Server 自动调用，这样我们就不用每次开机都要输一遍指令啦！</p> <h4 id="方法一-修改-xorg-配置"><a href="#方法一-修改-xorg-配置" class="header-anchor">#</a> 方法一：修改 Xorg 配置</h4> <p>通过修改 Xorg 配置来让 X Server 每次启动时读取我们的设定配置，这是最正统的方法。由于只需要修改与显示相关的设置，因此我们选择在 <code>/etc/X11/xorg.conf.d/</code> 目录下新建一个后缀为 <code>.conf</code> 的配置文件，在文件中加入我们需要的选项即可。</p> <p>以下是配置文件的范例。</p> <div class="language-python extra-class"><pre class="language-python"><code>Section <span class="token string">&quot;ServerLayout&quot;</span>
    Identifier <span class="token string">&quot;layout&quot;</span>
	Screen <span class="token number">0</span> <span class="token string">&quot;Screen0&quot;</span>	<span class="token comment"># 使用 Screen0 作为主屏幕</span>
EndSection

Section <span class="token string">&quot;Monitor&quot;</span>	<span class="token comment"># 显示器</span>
    Identifier <span class="token string">&quot;DP-0&quot;</span> 	<span class="token comment"># Identifier 与 xrandr 输出中的名字保持一致</span>
EndSection

Section <span class="token string">&quot;Monitor&quot;</span>
    Identifier  <span class="token string">&quot;HDMI-0&quot;</span>
EndSection

Section <span class="token string">&quot;Device&quot;</span>	<span class="token comment"># 显卡的驱动程序，很重要的设置</span>
    Identifier  <span class="token string">&quot;Card0&quot;</span>
    Driver      <span class="token string">&quot;intel&quot;</span>		<span class="token comment"># 实际使用的显卡驱动程序（Intel）</span>
    BusID       <span class="token string">&quot;PCI:0:2:0&quot;</span>	<span class="token comment"># 显卡总线ID（通过 lspci 命令查看）</span>
EndSection

Section <span class="token string">&quot;Device&quot;</span>
    Identifier  <span class="token string">&quot;Card1&quot;</span>
    Driver      <span class="token string">&quot;nvidia&quot;</span>	<span class="token comment"># 实际使用的显卡驱动程序（NVIDIA）</span>
    BusID       <span class="token string">&quot;PCI:1:0:0&quot;</span> <span class="token comment"># 显卡总线ID</span>
EndSection

Section <span class="token string">&quot;Screen&quot;</span>	<span class="token comment">#与显示的界面有关</span>
    Identifier <span class="token string">&quot;Screen0&quot;</span>
    Device <span class="token string">&quot;Card0&quot;</span>		<span class="token comment"># 使用哪一个显卡</span>
    Monitor <span class="token string">&quot;DP-0&quot;</span>      <span class="token comment"># 使用哪一个显示器</span>
    SubSection <span class="token string">&quot;Display&quot;</span>	<span class="token comment"># 此阶段的附属设置选项</span>
    	Modes <span class="token string">&quot;1920x1080&quot;</span>	<span class="token comment"># 分辨率设置</span>
    	Viewport <span class="token number">0</span> <span class="token number">0</span>		<span class="token comment"># 屏幕的左上角坐标</span>
    EndSubSection
EndSection

Section <span class="token string">&quot;Screen&quot;</span>
    Identifier <span class="token string">&quot;Screen1&quot;</span>
    Device <span class="token string">&quot;Card1&quot;</span>
    Monitor <span class="token string">&quot;HDMI-0&quot;</span>
    SubSection <span class="token string">&quot;Display&quot;</span>
    	Modes <span class="token string">&quot;1920x1080&quot;</span>
    	Viewport <span class="token number">1920</span> <span class="token number">0</span> 	<span class="token comment"># HDMI-0 屏幕设置在 DP-0 的屏幕右边</span>
    EndSubSection
EndSection
</code></pre></div><p>如上内容中，我们将显示器 <code>DP-0</code> 和 NVIDIA 显卡绑定在一起，显示器 <code>HDMI-0</code> 和 Intel 显卡绑定在一起，设置 <code>DP-0</code> 为主屏幕，并通过设置两者的显示坐标，来使得 <code>HDMI-0</code> 屏幕显示在 <code>DP-0</code> 屏幕右侧。文件保存后，重启系统便会生效。</p> <p>两个屏幕的位置效果如下图所示。</p> <div class="language- extra-class"><pre class="language-text"><code>(0,0)-----------------+(1920,0)--------------+
|                     ||                     |
|     1920 x 1080     ||     1920 x 1080     |
|         DP-0        ||       HDMI-0        |
|                     ||                     |
+---------------------++---------------------+
</code></pre></div><p>自己编写 <code>xorg.conf</code> 配置文件时，需要结合自己电脑的具体情况，正确配置显卡（Device）、显示器（Monitor）和屏幕（Screen）之间的关系。如果任何一项配置错误，都可能导致无法启动 X Server，从而无法进入到桌面。如果真的进入不到桌面了，只能进入命令行模式，修正 <code>xorg.conf</code> 文件，使 X Server 能够正确启动。</p> <h4 id="方法二-修改-lightdm-配置"><a href="#方法二-修改-lightdm-配置" class="header-anchor">#</a> 方法二：修改 LightDM 配置</h4> <p>对于上一种方法的小伙伴，很有可能会担心自己文件编写错了怎么办，要是一通捯饬之后进不了桌面就不好弄了。所以，在这里提供一个更简单更安全的方法——修改 LightDM 的配置文件 <code>lightdm.conf</code>。</p> <p>LightDM（Light Display Manager）是一个轻量级的 Linux 桌面的桌面显示管理器。 Deepin 使用的便是 LightDM 而非传统 Ubuntu 使用的 GDM。X Server 启动后，LightDM 便会启动。我们可以考虑将我们设置多屏幕的命令写在一个脚本中，让 LightDM 启动时执行该脚本，这样一来进入到桌面时，多屏幕就已经为我们设置好了。下面我们来看看具体应该怎么操作。</p> <p>首先，新建一个文件作为我们的脚本文件，放到任何你喜欢的目录下。（例如放到 <code>/etc</code> 目录下，取名为 <code>MonitorInit</code>）</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$<span class="token operator">&gt;</span> <span class="token function">touch</span> /etc/MonitorInit	<span class="token comment"># 新建文件</span>
</code></pre></div><p>打开文件，将需要执行的命令输入其中，一行放一个命令。保存。（范例如下）</p> <div class="language-bash extra-class"><pre class="language-bash"><code>xrandr --output HDMI-0 --auto --mode 1920x1080
xrandr --output DP-0 --auto --mode 1920x1080
xrandr --output HDMI-0 --right-of DP-0
</code></pre></div><p>为该文件赋予可执行权限。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$<span class="token operator">&gt;</span> <span class="token function">chmod</span> +x /etc/MonitorInit
</code></pre></div><p>然后打开 LightDM 的配置文件 <code>lightdm.conf</code>。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$<span class="token operator">&gt;</span> code /etc/lightdm/lightdm.conf	<span class="token comment">#使用 VScode 打开文件</span>
</code></pre></div><p>找到其中的 <code>#display-setup-script=</code> 一行，去掉 <code>#</code> 注释，等号后面写入我们的创建的脚本的路径。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>display-setup-script<span class="token operator">=</span><span class="token string">&quot;/etc/MonitorInit&quot;</span>
</code></pre></div><p>保存。之后每次重启系统时，LightDM 都会自动执行我们脚本中的命令啦。</p> <p>参考 <a href="https://wiki.archlinux.org/index.php/Multihead#Configuration_using_xorg.conf" target="_blank" rel="noopener noreferrer">Configuration_using_xorg.conf<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h4 id="方法三-修改-profile-文件"><a href="#方法三-修改-profile-文件" class="header-anchor">#</a> 方法三：修改 ~/.profile 文件</h4> <p>想要让 Linux 系统在开机时执行一些预定的命令，传统的方法是将命令写在 <code>~/.profile</code> 文件中。</p> <p>打开 <code>~/.profile</code> 文件，将需要执行的命令写在文件的最后面。保存。需要注意的是，如果 <code>~/.bash_profile</code> 和 <code>~/.bash_login</code> 文件存在，需要删除这两个文件，否则 <code>~/.profile</code> 文件中的内容不会被系统执行。</p> <p>这种方法最简单，但是 <code>~/.profile</code> 文件只有在用户登录后，才会被读取并执行。并且也只对一个用户生效。因此，如果想要命令在登录前被执行，还是推荐使用方法二。</p> <h3 id="复杂一点的情况"><a href="#复杂一点的情况" class="header-anchor">#</a> 复杂一点的情况</h3> <p>想象以下情况：学生小明是一个笔记本用户，他的笔记本电脑只能通过集成的 Intel GPU 访问 LVDS1（笔记本电脑内部屏幕）和 VGA 输出； HDMI 和 DP 输出口则连接到 NVIDIA 独立显卡。他将外接显示器连在了笔记本的 HDMI 输出口上，想要作为笔记本屏幕的扩展屏幕。但由于两个视频输出由两张显卡分别提供，因此 <code>xrandr</code> 无法同时检测到两个输出口。</p> <p>要解决这种情况，就需要用到下面这种称为 Reverse PRIME（翻转主要输出设备） 的方法。</p> <h4 id="reverse-prime"><a href="#reverse-prime" class="header-anchor">#</a> Reverse PRIME</h4> <p>对于有两个 GPU 的情况，如果第二个 GPU 具有主 GPU 无法访问的视频输出，则可以使用 Reverse PRIME 方法来使用它们——即使用主 GPU 渲染图像，然后将渲染好的图像传递给第二个 GPU。如下命令将会把 <code>provider</code> 设置为 <code>output</code> 的输出口。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$<span class="token operator">&gt;</span> xrandr --setprovideroutputsource provider <span class="token builtin class-name">source</span>
</code></pre></div><p>针对小明的情况，我们可以使用下面的命令，将集成显卡作为主 CPU 进行渲染图像的工作，独立显卡设置为集成显卡的输出口。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$<span class="token operator">&gt;</span> xrandr --setprovideroutputsource nvidia Intel
</code></pre></div><p>执行完如上命令，独立显卡和集成显卡的输出就会同时出现在 <code>xrandr</code> 中了。</p> <p>小明非常开心，这下终于可以用上双屏幕了！</p> <p>但是，使用性能较弱的集成显卡来进行图像渲染，性能较强的独立显卡反而只作为一个图像输出中介，好像不太对？</p> <h4 id="独立显卡作为主显卡"><a href="#独立显卡作为主显卡" class="header-anchor">#</a> 独立显卡作为主显卡</h4> <p>让性能较弱的集成显卡来负责图像渲染，明显浪费了独立显卡的高性能。要让独立显卡来作为主要显卡，我们需要对 Xorg 配置进行修改。在 <code>/etc/X11/xorg.conf.d/</code> 路径下创建一个后缀名为 <code>.conf</code> 的文件，添加如下内容。</p> <div class="language-python extra-class"><pre class="language-python"><code>Section <span class="token string">&quot;ServerLayout&quot;</span>
    Identifier <span class="token string">&quot;layout&quot;</span>
    Screen <span class="token number">0</span> <span class="token string">&quot;nvidia&quot;</span>	<span class="token comment"># nvidia 设置为主屏幕</span>
    Inactive <span class="token string">&quot;intel&quot;</span>	<span class="token comment"># 禁用 intel 屏幕</span>
EndSection

Section <span class="token string">&quot;Device&quot;</span>
    Identifier  <span class="token string">&quot;nvidia&quot;</span>
    Driver      <span class="token string">&quot;nvidia&quot;</span>
    BusID       <span class="token string">&quot;PCI:1:0:0&quot;</span> <span class="token comment"># 根据自己电脑情况进行修改</span>
EndSection

Section <span class="token string">&quot;Screen&quot;</span>
    Identifier <span class="token string">&quot;nvidia&quot;</span>
    Device <span class="token string">&quot;nvidia&quot;</span>
EndSection

Section <span class="token string">&quot;Device&quot;</span>
    Identifier  <span class="token string">&quot;intel&quot;</span>
    Driver      <span class="token string">&quot;intel&quot;</span>
    BusID       <span class="token string">&quot;PCI:0:2:0&quot;</span>  <span class="token comment"># 根据自己电脑情况进行修改</span>
EndSection

Section <span class="token string">&quot;Screen&quot;</span>
    Identifier <span class="token string">&quot;intel&quot;</span>
    Device <span class="token string">&quot;intel&quot;</span>
EndSection
</code></pre></div><p>保存并重启后，HDMI 和 DP 输出口成为了主输出，LVDS1 和 VGA 输出口被关闭。用如下命令重新启用它们。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$<span class="token operator">&gt;</span> xrandr --setprovideroutputsource Intel nvidia 
</code></pre></div><p>现在四个输出口就都被启用了。</p> <p>内容参考自 <a href="https://wiki.archlinux.org/index.php/PRIME#Reverse_PRIME" target="_blank" rel="noopener noreferrer">Reverse PRIME<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h3 id="错误诊断"><a href="#错误诊断" class="header-anchor">#</a> 错误诊断</h3> <p>先写到这儿吧，写着好累啊～～剩下的内容以后再继续补充。</p></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/linuxdeepin/docs/edit/master/docs/02.经验分享/03.双屏幕设置.md" target="_blank" rel="noopener noreferrer">帮助编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">1/24/2021, 2:59:57 PM</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/b45fca/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Deepin初上手攻略</div></a> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/b45fca/" class="prev">Deepin初上手攻略</a></span> <!----></p></div></div></div> <!----> </main></div> <div class="footer"><div class="icons"><a href="mailto:github@uniontech.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/linuxdeepin/docs" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2020-2021
    <span>Deepin | MIT License</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">跟随系统</li><li class="iconfont icon-rijianmoshi">浅色模式</li><li class="iconfont icon-yejianmoshi">深色模式</li><li class="iconfont icon-yuedu">阅读模式</li></ul></div></div> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.68231c63.js" defer></script><script src="/assets/js/2.ed4cc2e0.js" defer></script><script src="/assets/js/53.38267dad.js" defer></script>
  </body>
</html>